<!DOCTYPE html>
<html>
   <head>
      <title>natureskin</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
      <link rel="stylesheet" type="text/css" href="lib/jquery.mobile-1.3.0/naturey.css">
      <link rel="stylesheet" type="text/css" href="lib/jquery.mobile-1.3.0/jquery.mobile.structure-1.3.0.css">
      <style>
         .map-page{
            width: 100%;
            height: 100%;
         }

         #map_content.ui-content{
            padding: 0px;
            width: 100%;
            height: 100%;
         }

         #map_canvas{
            width: 100%;
            height: 100%;
            padding: 0px;
            text-shadow: none;
         }
      </style>
      <script type="text/javascript" src="phonegap.js"></script>
      <script type="text/javascript" src="cordova.js"></script>
      <script type="text/javascript" src="lib/jquery-1.9.1.js"></script>
      <script type="text/javascript" src="lib/jquery.mobile-1.3.0/jquery.mobile-1.3.0.js"></script>
      <script type="text/javascript" src="lib/jquery.ui.map.full.min.js"></script>
      <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3&region=GB&sensor=true&key=AIzaSyCZpQAo0USwbOMZEX4Hb3OHISQktfzza2s">
      </script>
      <script type="text/javascript"
         src="data/magaonb.json">
      </script>
      <script type="text/javascript">
         function addPolygon(polygon, map) {
            var coords = new Array();
            for(var i=1; i<polygon.points.length; i+=2) {
               coords.push(new google.maps.LatLng(
                  polygon['points'][i], polygon['points'][i-1]
               ));
            }
            poly = new google.maps.Polygon({
               paths: coords,
               /*strokeColor: "#33AA00",
               strokeOpacity: 1,
               strokeWeight: 1,
               fillColor: "#66DD00",
               fillOpacity: 0.5*/
            });
            poly.setMap(map);
         }

         function init() {
            $('#map_canvas').gmap({
               'center': new google.maps.LatLng(50.576332919943006, -1.5872561139346522),
               'zoom': 8,
               'mapTypeId': google.maps.MapTypeId.SATELLITE,
               'disableDefaultUI': true
            }).bind('init', init_polygons);
         }

         function init_polygons(ev, map) {
            var polygons = get_polygons();
            for(var i=0; i<polygons.length; i++) {
               addPolygon(polygons[i], map);
            }
         }

         $(document).ready(init);
      </script>
   </head>
   <body>
      <div data-role="page" data-theme="b" id="map" class="map-page">
         <div data-role="header" data-position="inline">
            <h3>natureskin</h3>
            <a href="/menu" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-right jqm-home">Home</a>
         </div>
         <div data-role="content" id="map_content">
            <div id="map_canvas"></div>
         </div>
      </div>
   </body>
</html>
