<!DOCTYPE html>
<html>
   <head>
      <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
      <style type="text/css">
         html { height: 100%; }
         body { height: 100%; margin: 0; padding: 0; }
         #map_canvas { height: 100%; }
      </style>
      <script type="text/javascript"
         src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCZpQAo0USwbOMZEX4Hb3OHISQktfzza2s&sensor=true">
      </script>
      <script type="text/javascript"
         src="magaonb.json">
      </script>
      <script type="text/javascript">
         var map = null;

         function addPolygon(polygon) {
            var coords = new Array();
            for(var i=1; i<polygon.points.length; i+=2) {
               coords.push(new google.maps.LatLng(
                  polygon['points'][i], polygon['points'][i-1]
               ));
            }
            poly = new google.maps.Polygon({
               paths: coords,
               /*strokeColor: "#33AA00",
               strokeOpacity: 1,
               strokeWeight: 1,
               fillColor: "#66DD00",
               fillOpacity: 0.5*/
            });
            console.log(coords);
            poly.setMap(map);
         }

         function init() {
            var mapOptions = {
               center: new google.maps.LatLng(50.576332919943006, -1.5872561139346522),
               zoom: 8,
               mapTypeId: google.maps.MapTypeId.SATELLITE
            }
            map = new google.maps.Map(
               document.getElementById("map_canvas"), mapOptions
            );
            var polygons = get_polygons();
            setTimeout(function() {
               for(var i=0; i<polygons.length; i++) {
                  addPolygon(polygons[i]);
               }
            }, 1000);
         }
      </script>
   </head>
   <body onload="init()">
      <div id="map_canvas" style="width: 100%; height: 100%"></div>
   </body>
</html>
